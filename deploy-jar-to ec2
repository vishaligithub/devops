pipeline {
   agent any

   tools {
      maven 'maven'
   }

   stages {
      stage('Build') {
         steps {           
            sh "mvn -Dmaven.test.failure.ignore=true clean compile"
         }
      }
      stage("Deploy") {
          steps {
            sh "mvn -Dmaven.test.failure.ignore=true clean install"
            sshagent(['ssh_ec2']) {
               sh 'scp -o StrictHostKeyChecking=no /var/lib/jenkins/workspace/2nd pipeline with ssh/target/*.war ubuntu@3.15.212.160:/opt'
            }
          }
      }
   }
}


